{
  "services": [
    {
      "name": "docker-db",
      "exec": [
        "/usr/bin/docker", "run",
        "-i",
        "--rm",
        "--name={name}",
        "--network={networkname}",
        "{image_name}"
      ],
      "execStop": [ "/usr/bin/docker", "stop", "{name}" ],
      "context": {
        "name": "{service_name}_{engine_name}",
        "image_name": "health_{engine_name}"
      },
      "abstract": true
    },
    {
      "name": "rabbitmq",
      "exec" : [ "/usr/bin/docker", "run",
        "-i",
        "--rm",
        "-p", "15672:15672",
        "-p", "5672:5672",
        "--name=rabbitmq",
        "--network={networkname}",
        "rabbitmq:3-management"],
      "execStop": [ "/usr/bin/docker", "stop", "rabbitmq"]
    },
    {
      "name": "docker",
      "exec" : ["/usr/bin/docker", "run",
        "--rm", "-i",
        "-v", "{current_dir}/app:/app",
        "-v", "{root}/services/maiev-base/app/common/:/app/common",
        "-v", "{root}/services/maiev-base/run_dev.sh:/run_dev.sh",
        "{extra_volume}",
        "-e", "SERVICE_NAME={service_name}",
        "-e FORCE_COLOR=true",
        "--network={networkname}",
        "--link", "rabbitmq:rabbitmq",
        "{extra_link}",
        "--name={docker_name}",
        "{service_name}",
        "/run_dev.sh"],
      "execStop": ["/usr/bin/docker", "stop", "{docker_name}"],
      "dependency": [
        "rabbitmq"
      ],
      "abstract": true
    }
  ],
  "context": {
    "service_name": "{dirname}",
    "docker_name": "{service_name}",
    "networkname": "maiev-dev",
    "extra_link": "",
    "extra_volume": ""
  },
  "discover": [
    "services"
  ]
}