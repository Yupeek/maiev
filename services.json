{
  "services": [
    {
      "name": "rabbitmq",
      "exec" : [ "/usr/bin/docker", "run",
        "-i",
        "--rm",
        "-p", "15672:15672",
        "-p", "5672:5672",
        "--name=rabbitmq",
        "--network={networkname}",
        "rabbitmq:3-management"],
      "execStop": [ "/usr/bin/docker", "stop", "rabbitmq"]
    },
    {
      "name": "docker",
      "exec" : ["/usr/bin/docker", "run",
        "--rm", "-i",
        "-v", "{current_dir}:/app",
        "-v", "{root}/services/Makefile.inc:/Makefile.inc",
        "{extra_volume}",
        "-e", "SERVICE_NAME={service_name}",
        "-e FORCE_COLOR=true",
        "--network={networkname}",
        "--link", "rabbitmq:rabbitmq",
        "{extra_link}",
        "--name={docker_name}",
        "{service_name}",
        "/app/run_dev.sh"],
      "execStop": ["/usr/bin/docker", "stop", "{docker_name}"],
      "dependency": [
        "rabbitmq"
      ],
      "abstract": true
    }
  ],
  "context": {
    "service_name": "{dirname}",
    "docker_name": "{service_name}",
    "networkname": "maiev-dev",
    "extra_link": "",
    "extra_volume": ""
  },
  "discover": [
    "services"
  ]
}